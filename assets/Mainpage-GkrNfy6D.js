import{u as w,a as M,b as v,r as p,j as e,c as k,d as S,L as y,f as $}from"./index-Uom990bX.js";function T({movies:l=[],type:t}){const x=w(),u=M(),{movies:g,tvShows:a}=v(s=>s.watchlist),{isAuthenticated:j}=v(s=>s.user),o=s=>t==="movie"?g.some(r=>r.id===s):a.some(r=>r.id===s),d=s=>{o(s.id)?x(k({id:s.id,type:t})):x(S({item:s,type:t}))},[n,N]=p.useState(1),b=12,m=Math.ceil(l.length/b),f=(n-1)*b,P=l.slice(f,f+b);return!l||l.length===0?e.jsx("p",{className:"text-center mt-5",children:"No movies available."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:P.map(s=>{var r;return e.jsx("div",{className:"col-6 col-sm-4 col-md-3 col-lg-2 mb-4",children:e.jsxs("div",{className:"card h-100 border-0 shadow-sm",children:[e.jsx("div",{className:"position-relative",onClick:()=>u(`/movie/Details/${s.id}`,{state:{type:t}}),style:{cursor:"pointer",height:"280px",overflow:"hidden"},children:e.jsx("img",{src:s.poster_path?`https://image.tmdb.org/t/p/w500${s.poster_path}`:"https://via.placeholder.com/220x320?text=No+Image",className:"card-img-top h-100",alt:t==="movie"?s.title:s.name,style:{objectFit:"cover"}})}),e.jsxs("div",{className:"card-body d-flex flex-column justify-content-between p-2",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("h6",{className:"card-title text-truncate mb-0",title:t==="movie"?s.title:s.name,children:t==="movie"?s.title:s.name}),e.jsxs("small",{className:"text-muted",children:[((r=s.vote_average)==null?void 0:r.toFixed(1))||"N/A"," ⭐"]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("small",{className:"text-muted",children:t==="movie"?s.release_date:s.first_air_date}),j&&e.jsx("button",{className:`btn btn-sm ${o(s.id)?"btn-danger":"btn-outline-danger"}`,onClick:c=>{c.stopPropagation(),d(s)},children:e.jsx("i",{className:`bi bi-heart${o(s.id)?"-fill":""}`})})]})]})]})},s.id)})}),m>1&&e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${n===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>N(n-1),children:"Previous"})}),(()=>{const s=[];let c=Math.max(1,n-Math.floor(2.5)),h=c+5-1;h>m&&(h=m,c=Math.max(1,h-5+1)),c>1&&s.push("...");for(let i=c;i<=h;i++)s.push(i);return h<m&&s.push("..."),s.map((i,C)=>e.jsx("li",{className:`page-item ${i===n?"active":""} ${i==="..."?"disabled":""}`,children:i==="..."?e.jsx("span",{className:"page-link",children:"…"}):e.jsx("button",{className:"page-link",onClick:()=>N(i),children:i})},C))})(),e.jsx("li",{className:`page-item ${n===m?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>N(n+1),children:"Next"})})]})})})]})}function _(){const l=w(),{data:t,loading:x,error:u}=v(d=>d.api),{lang:g}=p.useContext(y),[a,j]=p.useState("movie"),o=d=>({en:"en-US",ar:"ar-SA",fr:"fr-FR",zh:"zh-CN"})[d]||"en-US";return p.useEffect(()=>{l($({type:a,customParams:{language:o(g)}}))},[a,g,l]),x?e.jsx("div",{className:"container mt-4 text-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):u?e.jsx("div",{className:"container mt-4 text-center",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:["Error: ",u]})}):e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h5",{children:a==="movie"?"Best Movies":"Best TV Shows"}),e.jsxs("h1",{children:["World's Best ",a==="movie"?"Movies":"TV Shows"]}),e.jsxs("div",{className:"btn-group mt-3",role:"group",children:[e.jsx("button",{className:`btn btn-${a==="movie"?"primary":"outline-primary"}`,onClick:()=>j("movie"),children:"Movies"}),e.jsx("button",{className:`btn btn-${a==="tv"?"primary":"outline-primary"}`,onClick:()=>j("tv"),children:"TV Shows"})]})]}),t&&t.length>0?e.jsx(T,{movies:t,type:a}):e.jsx("div",{className:"text-center",children:e.jsx("p",{children:"No movies found. Please try a different search or category."})})]})}export{_ as default};
