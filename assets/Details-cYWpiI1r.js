import{r as h,j as e,a as x,s as p,t as g}from"./index-Uom990bX.js";function u({id:o,type:r}){var m,n;const[t,c]=h.useState(null),l="09d024e546a655103a6a2573e989f76d";if(h.useEffect(()=>{fetch(`https://api.themoviedb.org/3/${r}/${o}?api_key=${l}&language=en-US`).then(a=>a.json()).then(a=>c(a)).catch(a=>console.error(a))},[o,r,l]),!t)return e.jsx("div",{className:"text-center mt-5",children:"Loading..."});const s=Math.round(t.vote_average/2),i=Array.from({length:5},(a,d)=>e.jsx("span",{style:{color:d<s?"#FFD700":"#ccc"},children:"★"},d));return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${t.poster_path}`,alt:r==="movie"?t.title:t.name,className:"img-fluid",style:{maxWidth:"100%",height:"100%",border:"4px solid",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"}})}),e.jsxs("div",{className:"col-md-8",children:[e.jsx("h2",{children:r==="movie"?t.title:t.name}),e.jsx("p",{children:r==="movie"?t.release_date:t.first_air_date}),e.jsx("h2",{className:"mb-3",children:i}),e.jsx("h4",{children:t.overview}),e.jsx("div",{className:"mb-3",children:(m=t.genres)==null?void 0:m.map(a=>e.jsx("span",{style:{backgroundColor:"#FFD700",color:"#000",padding:"4px 10px",borderRadius:"12px",border:"1px solid #FFD700",marginRight:"8px",display:"inline-block",fontSize:"0.85rem"},children:a.name},a.id))}),e.jsx("div",{className:"mb-3 d-flex flex-wrap gap-3",children:(n=t.production_companies)==null?void 0:n.map(a=>a.logo_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w200${a.logo_path}`,alt:a.name,title:a.name,style:{maxHeight:"100px",objectFit:"contain",padding:"5px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.15)"}},a.id):null)}),t.imdb_id&&e.jsx("div",{className:"mb-3",children:e.jsxs("a",{href:`https://www.imdb.com/title/${t.imdb_id}`,target:"_blank",rel:"noopener noreferrer",className:"btn d-inline-flex align-items-center gap-2",style:{border:"2px solid #FFD700",color:"",borderRadius:"20px",fontWeight:"bold"},children:["IMDb Page ",e.jsx("i",{className:"bi bi-link-45deg"})]})})]})]})}function j({id:o}){const[r,t]=h.useState([]),c="5fba6bb2cc761bb44d74da68b2bc3e5f",l=x();return h.useEffect(()=>{fetch(`https://api.themoviedb.org/3/movie/${o}/reviews?api_key=${c}&language=en-US`).then(s=>{if(!s.ok)throw l("/not-found"),new Error(`HTTP error: ${s.status}`);return s.json()}).then(s=>{t(s.results)}).catch(s=>{console.error("Fetch error:",s),l("/not-found")})},[o,l]),r?e.jsx("section",{className:"p-3 text-center text-lg-start",children:e.jsx("div",{className:"row d-flex justify-content-center",children:e.jsxs("div",{className:"col-md-10",children:[e.jsx("h1",{children:"Review"}),r.map(s=>{const i=s.author_details.avatar_path,m=i&&(i.endsWith(".jpg")||i.endsWith(".jpeg")||i.endsWith(".png")||i.startsWith("/https")||i.startsWith("/gravatar"));return e.jsx("div",{className:"card mb-3 shadow-sm",style:{padding:"10px",borderRadius:"12px"},children:e.jsx("div",{className:"card-body py-2 px-3",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-lg-3 d-flex justify-content-center",children:m?e.jsx("img",{src:i.startsWith("/https")?i.slice(1):`https://image.tmdb.org/t/p/w200${i}`,alt:s.author,style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"}}):e.jsx("div",{style:{width:"100px",height:"100px",borderRadius:"50%",backgroundColor:"#eee",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",color:"#666",textAlign:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.1)"},children:"No image available"})}),e.jsxs("div",{className:"col-lg-9 text-start",children:[e.jsx("p",{className:"text-muted mb-2",style:{fontSize:"0.95rem"},children:s.content.length>300?s.content.slice(0,300)+"...":s.content}),e.jsx("p",{className:"fw-bold mb-1",children:e.jsx("strong",{children:s.author})}),e.jsxs("p",{className:"text-muted mb-0",style:{fontSize:"0.85rem"},children:["Rating:"," ",s.author_details.rating?`${s.author_details.rating} / 10`:"N/A"]})]})]})})},s.id)})]})})}):e.jsx("div",{className:"text-center mt-5",children:"No reviews found."})}function b({id:o,type:r}){const[t,c]=h.useState([]),[l,s]=h.useState(!0),i=x(),m="09d024e546a655103a6a2573e989f76d";return h.useEffect(()=>{(async()=>{try{const d=await(await fetch(`https://api.themoviedb.org/3/${r}/${o}/recommendations?api_key=${m}&language=en-US`)).json();c(d.results||[])}catch(a){console.error("Error fetching recommendations:",a)}finally{s(!1)}})()},[o,r,m]),l?e.jsx("div",{className:"text-center mt-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading recommendations..."})})}):t.length===0?e.jsx("div",{className:"text-center mt-4",children:e.jsx("h3",{children:"No recommendations available"})}):e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"mb-4",children:["Recommended ",r==="movie"?"Movies":"TV Shows"]}),e.jsx("div",{className:"d-flex flex-wrap gap-3",children:t.slice(0,6).map(n=>{var a;return e.jsxs("div",{className:"card",style:{width:"200px",cursor:"pointer",transition:"transform 0.2s"},onClick:()=>i(`/movie/Details/${n.id}`,{state:{type:r}}),onMouseOver:d=>d.currentTarget.style.transform="scale(1.05)",onMouseOut:d=>d.currentTarget.style.transform="scale(1)",children:[e.jsx("img",{src:n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:"https://via.placeholder.com/200x300?text=No+Image",className:"card-img-top",alt:r==="movie"?n.title:n.name,style:{height:"300px",objectFit:"cover"}}),e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title text-truncate",children:r==="movie"?n.title:n.name}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("small",{className:"text-muted",children:r==="movie"?n.release_date:n.first_air_date}),e.jsxs("small",{className:"text-warning",children:["⭐ ",(a=n.vote_average)==null?void 0:a.toFixed(1)]})]})]})]},n.id)})})]})}function v(){var c;const{id:o}=p(),t=((c=g().state)==null?void 0:c.type)||"movie";return e.jsxs("div",{className:"container mt-5",children:[e.jsx(u,{id:o,type:t}),e.jsx("hr",{}),e.jsx(j,{id:o}),e.jsx("hr",{}),e.jsx(b,{id:o,type:t})]})}export{v as default};
